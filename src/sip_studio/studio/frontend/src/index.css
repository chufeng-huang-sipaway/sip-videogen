@import "tailwindcss";
@plugin "@tailwindcss/typography";

@theme {
  /* Minimalist Floating Studio Theme */
  --color-background: hsl(240 10% 98%);
  /* Soft off-white for global bg */
  --color-foreground: hsl(240 10% 10%);
  --color-card: hsl(0 0% 100%);
  --color-card-foreground: hsl(240 10% 10%);
  --color-popover: hsl(0 0% 100%);
  --color-popover-foreground: hsl(240 10% 10%);
  /* PRIMARY = Brand Red (buttons, links, selections) */
  --color-primary: #ed0942;
  --color-primary-foreground: hsl(0 0% 100%);
  /* Brand color scale for explicit usage */
  --color-brand-500: #ed0942;
  --color-brand-600: #d4073b;
  --color-brand-700: #b20632;
  --color-brand-a10: rgba(237,9,66,0.1);
  --color-brand-a20: rgba(237,9,66,0.2);
  --color-brand-a30: rgba(237,9,66,0.3);
  /* Success (confirmations only) */
  --color-success: #22c55e;
  --color-success-a10: rgba(34,197,94,0.1);
  /* Progress/Info state - calm blue for in-progress indicators */
  --color-progress: #3b82f6;
  --color-progress-foreground: #ffffff;
  --color-progress-a10: rgba(59,130,246,0.1);
  --color-progress-a20: rgba(59,130,246,0.2);
  /* Warning - orange for caution states (macOS semantic) */
  --color-warning: #f97316;
  --color-warning-foreground: #ffffff;
  --color-warning-a10: rgba(249,115,22,0.1);
  --color-warning-a20: rgba(249,115,22,0.2);
  /* Info - sky blue for informational messages */
  --color-info: #0ea5e9;
  --color-info-foreground: #ffffff;
  --color-info-a10: rgba(14,165,233,0.1);
  --color-info-a20: rgba(14,165,233,0.2);
  --color-secondary: hsl(240 5% 96%);
  /* Very light gray for fills */
  --color-secondary-foreground: hsl(240 5% 15%);
  --color-muted: hsl(240 5% 96%);
  --color-muted-foreground: hsl(240 4% 46%);
  /* Keep accent as neutral (used for hover states) */
  --color-accent: hsl(240 5% 96%);
  --color-accent-foreground: hsl(240 5% 15%);
  /* Destructive = brand red */
  --color-destructive: #ed0942;
  --color-destructive-foreground: hsl(0 0% 98%);
  --color-border: hsl(240 6% 90%);
  --color-input: hsl(240 6% 90%);
  /* Ring = brand red for focus */
  --color-ring: #ed0942;
  --radius: 0.85rem;
  /* Slightly friendlier rounding */
  /* Custom Shadow Utilities - depth hierarchy */
  --shadow-soft: 0 4px 20px -2px rgba(0, 0, 0, 0.03), 0 2px 8px -2px rgba(0, 0, 0, 0.02);
  --shadow-float: 0 12px 40px -8px rgba(0, 0, 0, 0.08), 0 4px 16px -4px rgba(0, 0, 0, 0.04);
  --shadow-hover: 0 8px 32px -6px rgba(0, 0, 0, 0.06);
  --shadow-elevated: 0 8px 30px -4px rgba(0, 0, 0, 0.12), 0 4px 12px -2px rgba(0, 0, 0, 0.08);
  --shadow-elevated-alt: 0 4px 20px -2px rgba(0, 0, 0, 0.08), 0 2px 8px -1px rgba(0, 0, 0, 0.04);
  /* Animation keyframes */
  --animate-accordion-down: accordion-down 0.2s ease-out;
  --animate-accordion-up: accordion-up 0.2s ease-out;
  --animate-shimmer: shimmer 2s linear infinite;
  --animate-fade-in-up: fadeInUp 0.4s ease-out;
}

/* Dark mode colors - Deep and Rich */
.dark {
  --color-background: hsl(240 10% 6%);
  /* Slightly lighter than pure black */
  --color-foreground: hsl(0 0% 98%);
  --color-card: hsl(240 10% 8%);
  --color-card-foreground: hsl(0 0% 98%);
  --color-popover: hsl(240 10% 8%);
  --color-popover-foreground: hsl(0 0% 98%);
  /* PRIMARY = Brand Red (same in dark mode) */
  --color-primary: #ed0942;
  --color-primary-foreground: hsl(0 0% 100%);
  /* Brand colors constant across modes */
  --color-brand-500: #ed0942;
  --color-brand-600: #d4073b;
  --color-brand-700: #b20632;
  --color-brand-a10: rgba(237,9,66,0.12);
  --color-brand-a20: rgba(237,9,66,0.24);
  --color-brand-a30: rgba(237,9,66,0.36);
  --color-success: #22c55e;
  --color-success-a10: rgba(34,197,94,0.12);
  /* Progress/Info state - calm blue */
  --color-progress: #60a5fa;
  --color-progress-foreground: #ffffff;
  --color-progress-a10: rgba(96,165,250,0.12);
  --color-progress-a20: rgba(96,165,250,0.24);
  /* Warning - lighter orange for dark mode */
  --color-warning: #fb923c;
  --color-warning-foreground: #ffffff;
  --color-warning-a10: rgba(251,146,60,0.12);
  --color-warning-a20: rgba(251,146,60,0.24);
  /* Info - lighter sky for dark mode */
  --color-info: #38bdf8;
  --color-info-foreground: #ffffff;
  --color-info-a10: rgba(56,189,248,0.12);
  --color-info-a20: rgba(56,189,248,0.24);
  --color-secondary: hsl(240 4% 16%);
  --color-secondary-foreground: hsl(0 0% 98%);
  --color-muted: hsl(240 4% 16%);
  --color-muted-foreground: hsl(240 5% 64.9%);
  /* Accent for dark mode hover */
  --color-accent: hsl(240 4% 16%);
  --color-accent-foreground: hsl(0 0% 98%);
  --color-destructive: #ed0942;
  --color-destructive-foreground: hsl(0 0% 98%);
  --color-border: hsl(240 4% 16%);
  --color-input: hsl(240 4% 16%);
  --color-ring: #ed0942;
}

@keyframes accordion-down {
  from {
    height: 0;
  }

  to {
    height: var(--radix-accordion-content-height);
  }
}

@keyframes accordion-up {
  from {
    height: var(--radix-accordion-content-height);
  }

  to {
    height: 0;
  }
}

@keyframes shimmer {
  from {
    background-position: 0 0;
  }

  to {
    background-position: -200% 0;
  }
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(10px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}
/* Thinking step breathing animation */
@keyframes step-breathing {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.7; }
}
.animate-step-breathing { animation: step-breathing 2s ease-in-out infinite; }
/* Progress item pulse - subtle glow */
@keyframes progress-pulse {
  0%, 100% { box-shadow: 0 0 0 0 rgba(59,130,246,0.15); }
  50% { box-shadow: 0 0 0 4px rgba(59,130,246,0.08); }
}
.animate-progress-pulse { animation: progress-pulse 2s ease-in-out infinite; }
/* Todo progress bar breathing - gentle opacity pulse */
@keyframes todo-bar-breathing {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.7; }
}
.animate-todo-bar-breathing { animation: todo-bar-breathing 2s ease-in-out infinite; }
/* Working badge breathing - subtle scale + opacity */
@keyframes badge-breathing {
  0%, 100% { opacity: 1; transform: scale(1); }
  50% { opacity: 0.85; transform: scale(0.98); }
}
.animate-badge-breathing { animation: badge-breathing 2s ease-in-out infinite; }

/* Scrollbar - macOS Monterey+ style (auto-hide, 6px width) */
::-webkit-scrollbar{width:6px;height:6px;}
::-webkit-scrollbar-track{background:transparent;}
::-webkit-scrollbar-thumb{background:rgba(0,0,0,0.2);border-radius:10px;transition:background 0.2s ease;}
::-webkit-scrollbar-thumb:hover{background:rgba(0,0,0,0.35);}
.dark ::-webkit-scrollbar-thumb{background:rgba(255,255,255,0.15);}
.dark ::-webkit-scrollbar-thumb:hover{background:rgba(255,255,255,0.25);}

/* Glassmorphism Utilities */
.glass {
  background: rgba(255, 255, 255, 0.65);
  backdrop-filter: blur(24px) saturate(160%);
  -webkit-backdrop-filter: blur(24px) saturate(160%);
  border: 1px solid rgba(255, 255, 255, 0.4);
}

.dark .glass {
  background: rgba(20, 20, 20, 0.6);
  border: 1px solid rgba(255, 255, 255, 0.05);
}

.glass-sidebar {
  background: rgba(255, 255, 255, 0.7);
  backdrop-filter: blur(32px) saturate(140%);
  -webkit-backdrop-filter: blur(32px) saturate(140%);
  border-right: 1px solid rgba(0, 0, 0, 0.03);
}
.dark .glass-sidebar {
  background: rgba(18, 18, 18, 0.7);
  border-right: 1px solid rgba(255, 255, 255, 0.03);
}
/* Sidebar vibrancy - lighter bg when native vibrancy enabled (macOS), keep backdrop-filter for internal content */
[data-vibrancy="true"] .vibrancy-sidebar{background:rgba(255,255,255,0.6)!important;backdrop-filter:blur(20px) saturate(120%)!important;-webkit-backdrop-filter:blur(20px) saturate(120%)!important;}
.dark [data-vibrancy="true"] .vibrancy-sidebar,[data-vibrancy="true"].dark .vibrancy-sidebar{background:rgba(30,30,30,0.6)!important;}

.glass-panel {
  background: rgba(255, 255, 255, 0.5);
  backdrop-filter: blur(20px) saturate(140%);
  -webkit-backdrop-filter: blur(20px) saturate(140%);
  border: 1px solid rgba(255, 255, 255, 0.3);
}
.dark .glass-panel {
  background: rgba(28, 28, 30, 0.85);
  border: 1px solid rgba(255, 255, 255, 0.08);
}

.glass-pill {
  background: rgba(255, 255, 255, 0.85);
  backdrop-filter: blur(16px) saturate(180%);
  -webkit-backdrop-filter: blur(16px) saturate(180%);
  box-shadow: var(--shadow-float);
  border: 1px solid rgba(255, 255, 255, 0.5);
  border-radius: 1rem;
}

.dark .glass-pill {
  background: rgba(30, 30, 30, 0.8);
  border: 1px solid rgba(255, 255, 255, 0.08);
}
/* Standardized blur scale (use for new components) */
.blur-light{backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px);}
.blur-medium{backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);}
.blur-heavy{backdrop-filter:blur(16px);-webkit-backdrop-filter:blur(16px);}
.blur-extra{backdrop-filter:blur(24px);-webkit-backdrop-filter:blur(24px);}

/* Prevent elastic scrolling/bounce on macOS */
html,
body {
  overscroll-behavior: none;
  overflow: hidden;
}

/* ========== Stage 1: CSS Foundation (macOS Native) ========== */
/* ========== Stage 4: Window Focus States ========== */
/* ========== Stage 6: Typography System (macOS density) ========== */
/* ========== Stage 11: Motion System ========== */
/* Decision: CSS-only animations (no Framer Motion)
 * Rationale: Current CSS is performant, no jank observed, bundle size matters
 * prefers-reduced-motion already honored in this file */
/* Stagger animation for lists - use with .motion-stagger parent and .motion-stagger-item children */
.motion-stagger>.motion-stagger-item{opacity:0;transform:translateY(8px);animation:staggerFadeIn 0.3s ease-out forwards;}
.motion-stagger>.motion-stagger-item:nth-child(1){animation-delay:0ms;}
.motion-stagger>.motion-stagger-item:nth-child(2){animation-delay:50ms;}
.motion-stagger>.motion-stagger-item:nth-child(3){animation-delay:100ms;}
.motion-stagger>.motion-stagger-item:nth-child(4){animation-delay:150ms;}
.motion-stagger>.motion-stagger-item:nth-child(5){animation-delay:200ms;}
.motion-stagger>.motion-stagger-item:nth-child(6){animation-delay:250ms;}
.motion-stagger>.motion-stagger-item:nth-child(7){animation-delay:300ms;}
.motion-stagger>.motion-stagger-item:nth-child(8){animation-delay:350ms;}
.motion-stagger>.motion-stagger-item:nth-child(n+9){animation-delay:400ms;}
@keyframes staggerFadeIn{to{opacity:1;transform:translateY(0);}}
/* Motion presets (CSS custom properties for reusable timing) */
:root{--motion-duration-fast:150ms;--motion-duration-normal:200ms;--motion-duration-slow:300ms;--motion-ease-default:cubic-bezier(0.2,0,0.38,0.9);--motion-ease-expressive:cubic-bezier(0.4,0.14,0.3,1);}
:root{--text-xs:0.6875rem;--text-sm:0.8125rem;--text-base:0.875rem;--text-lg:1rem;--text-xl:1.125rem;--leading-tight:1.25;--leading-normal:1.4;}
/* Apply typography defaults */
body{line-height:var(--leading-normal);}
h1,h2,h3,h4,h5,h6{line-height:var(--leading-tight);font-weight:600;}
h1{font-size:var(--text-xl);}
h2{font-size:var(--text-lg);}
h3,h4,h5,h6{font-size:var(--text-base);}
label,.label{font-size:var(--text-sm);line-height:var(--leading-tight);}
small,.text-xs{font-size:var(--text-xs);line-height:var(--leading-tight);}
/* Grayscale accent colors when window unfocused (native macOS behavior) */
[data-window-focused="false"]{--color-primary:hsl(0 0% 55%);--color-ring:hsl(0 0% 55%);--color-brand-500:hsl(0 0% 55%);--color-brand-600:hsl(0 0% 50%);--color-brand-700:hsl(0 0% 45%);}
.dark [data-window-focused="false"]{--color-primary:hsl(0 0% 45%);--color-ring:hsl(0 0% 45%);--color-brand-500:hsl(0 0% 45%);--color-brand-600:hsl(0 0% 40%);--color-brand-700:hsl(0 0% 35%);}
/* Focus rings grayscale when unfocused */
[data-window-focused="false"] *:focus-visible{outline-color:hsl(0 0% 55%)!important;}
.dark [data-window-focused="false"] *:focus-visible{outline-color:hsl(0 0% 45%)!important;}
/* Scoped cursor rules - native macOS behavior */
body{cursor:default;}
input,textarea,[contenteditable]{cursor:text;}
a[href^="http"],a[href^="mailto"]{cursor:pointer;}
button{cursor:default;}
/* Scoped selection (class-based, not tag-based) */
.select-none{-webkit-user-select:none;user-select:none;}
input,textarea,[contenteditable]{-webkit-user-select:text;user-select:text;}
/* Prose content fully selectable including headings */
.prose,.prose *,.message-content,.message-content *,[data-selectable],[data-selectable] *{-webkit-user-select:text;user-select:text;}
/* System font + desktop density */
body{font-family:-apple-system,BlinkMacSystemFont,system-ui,sans-serif;font-size:14px;font-feature-settings:"rlig" 1,"calt" 1,"ss01" 1;}
/* Respect reduced motion preference */
@media(prefers-reduced-motion:reduce){
.animate-pulse,.animate-shimmer,.animate-step-breathing,.animate-progress-pulse,.animate-fade-in-up,.animate-todo-bar-breathing,.animate-badge-breathing{animation:none!important;}
.shimmer-overlay,.shimmer-sparkles,.sparkle{animation:none!important;opacity:0!important;}
.quick-edit-btn{animation:none!important;}
.magic-stop-btn{animation:none!important;}
/* Stage 11: Disable stagger animations */
.motion-stagger>.motion-stagger-item{animation:none!important;opacity:1!important;transform:none!important;}
}

/* Utilities for soft shadows - depth hierarchy */
.shadow-soft{box-shadow:var(--shadow-soft);}
.shadow-float{box-shadow:var(--shadow-float);}
.shadow-elevated{box-shadow:var(--shadow-elevated);}
.shadow-elevated-alt{box-shadow:var(--shadow-elevated-alt);}

/* Sidebar floating overlay shadow - soft, diffused for depth */
.sidebar-float-shadow {
  box-shadow:
    0 4px 6px -1px rgba(0, 0, 0, 0.04),
    0 10px 15px -3px rgba(0, 0, 0, 0.06),
    0 20px 25px -5px rgba(0, 0, 0, 0.05),
    0 25px 50px -12px rgba(0, 0, 0, 0.12);
}
.dark .sidebar-float-shadow {
  box-shadow:
    0 4px 6px -1px rgba(0, 0, 0, 0.15),
    0 10px 15px -3px rgba(0, 0, 0, 0.25),
    0 25px 50px -12px rgba(0, 0, 0, 0.45);
}

.animate-fade-in-up {
  animation: var(--animate-fade-in-up);
}

/* Prevent text selection during drag operations */
body.is-dragging,
body.is-dragging * {
  user-select: none !important;
  -webkit-user-select: none !important;
}

body.is-dragging img {
  pointer-events: none;
}

/* AI Quick Edit Button - Brand Holographic */
.quick-edit-btn {
  position: relative;
  /* Brand gradient: Rose -> Pink -> White shine - using brand red tones */
  background: linear-gradient(135deg, #fce7f3, #fecdd3, #ffffff, #fed7aa, #fce7f3);
  background-size: 300% 300%;
  animation: jewel-shift 4s ease-in-out infinite;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,0.9), inset 0 2px 5px rgba(255,255,255,1), 0 4px 15px rgba(237,9,66,0.25), 0 2px 4px rgba(0,0,0,0.05);
  border: 1px solid rgba(255,255,255,0.6);
  overflow: hidden;
  transition: all 0.4s cubic-bezier(0.2,0.8,0.2,1);
  color: #d4073b; /* brand-600 for icon */
}
.dark .quick-edit-btn {
  /* Dark mode: Deep brand red tones */
  background: linear-gradient(135deg, #4a1520, #6b1a2a, #7f1d2f, #4a1520);
  box-shadow: inset 0 0 0 1px rgba(255,255,255,0.2), inset 0 1px 4px rgba(255,255,255,0.3), 0 4px 16px rgba(237,9,66,0.4), 0 2px 6px rgba(0,0,0,0.4);
  color: white;
}
.quick-edit-btn:hover {
  transform: translateY(-2px) scale(1.08);
  box-shadow: inset 0 0 0 1px rgba(255,255,255,1), 0 8px 25px rgba(237,9,66,0.35), 0 4px 10px rgba(0,0,0,0.05);
}
.dark .quick-edit-btn:hover {
  box-shadow: inset 0 0 0 1px rgba(255,255,255,0.3), 0 8px 28px rgba(237,9,66,0.5), 0 4px 12px rgba(0,0,0,0.5);
}
.quick-edit-btn:active { transform: scale(0.95); }
.quick-edit-btn:disabled { background: transparent; animation: none; box-shadow: none; border-color: transparent; opacity: 0.5; }

@keyframes jewel-shift {
  0% {
    background-position: 0% 50%;
  }

  50% {
    background-position: 100% 50%;
  }

  100% {
    background-position: 0% 50%;
  }
}

/* Quick Edit Shimmer Overlay - Four Corner Atmospheric Glow with Brand Color */
.shimmer-overlay {
  position: absolute;
  inset: 0;
  overflow: hidden;
  z-index: 15;
  pointer-events: none;
  /* Four corner foggy radial gradients using brand red */
  background:
    radial-gradient(ellipse 70% 70% at 0% 0%, rgba(237, 9, 66, 0.5), rgba(237, 9, 66, 0.2) 50%, transparent 70%),
    radial-gradient(ellipse 70% 70% at 100% 0%, rgba(237, 9, 66, 0.45), rgba(237, 9, 66, 0.18) 50%, transparent 70%),
    radial-gradient(ellipse 70% 70% at 0% 100%, rgba(237, 9, 66, 0.45), rgba(237, 9, 66, 0.18) 50%, transparent 70%),
    radial-gradient(ellipse 70% 70% at 100% 100%, rgba(237, 9, 66, 0.5), rgba(237, 9, 66, 0.2) 50%, transparent 70%);
  filter: blur(20px);
  animation: corner-breathe 3.5s ease-in-out infinite;
}
/* Sparkle orbs at opposite corners */
.shimmer-overlay::before,
.shimmer-overlay::after {
  content: '';
  position: absolute;
  width: 200px;
  height: 200px;
  border-radius: 50%;
  background: radial-gradient(circle, rgba(255, 255, 255, 0.5) 0%, rgba(237, 9, 66, 0.35) 40%, transparent 70%);
  filter: blur(15px);
  animation: sparkle-pulse 2.5s ease-in-out infinite;
}
.shimmer-overlay::before { top: -50px; left: -50px; animation-delay: 0s; }
.shimmer-overlay::after { bottom: -50px; right: -50px; animation-delay: 1.25s; }
.dark .shimmer-overlay {
  background:
    radial-gradient(ellipse 70% 70% at 0% 0%, rgba(237, 9, 66, 0.6), rgba(237, 9, 66, 0.25) 50%, transparent 70%),
    radial-gradient(ellipse 70% 70% at 100% 0%, rgba(237, 9, 66, 0.55), rgba(237, 9, 66, 0.22) 50%, transparent 70%),
    radial-gradient(ellipse 70% 70% at 0% 100%, rgba(237, 9, 66, 0.55), rgba(237, 9, 66, 0.22) 50%, transparent 70%),
    radial-gradient(ellipse 70% 70% at 100% 100%, rgba(237, 9, 66, 0.6), rgba(237, 9, 66, 0.25) 50%, transparent 70%);
  filter: blur(25px);
}
.dark .shimmer-overlay::before,
.dark .shimmer-overlay::after {
  background: radial-gradient(circle, rgba(255, 255, 255, 0.6) 0%, rgba(237, 9, 66, 0.45) 40%, transparent 70%);
  filter: blur(18px);
}
/* Sparkle particles container */
.shimmer-sparkles { position: absolute; inset: 0; z-index: 16; pointer-events: none; overflow: hidden; }
/* Individual sparkle - 4-point star shape */
.sparkle {
  position: absolute;
  width: 16px;
  height: 16px;
  animation: sparkle-twinkle 1.8s ease-in-out infinite;
}
.sparkle::before, .sparkle::after {
  content: '';
  position: absolute;
  background: linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.95) 50%, transparent 100%);
  border-radius: 2px;
}
.sparkle::before { width: 100%; height: 3px; top: 50%; left: 0; transform: translateY(-50%); }
.sparkle::after { width: 3px; height: 100%; left: 50%; top: 0; transform: translateX(-50%); }
/* Brand-colored sparkles */
.sparkle.brand::before, .sparkle.brand::after {
  background: linear-gradient(90deg, transparent 0%, rgba(237,9,66,0.9) 50%, transparent 100%);
}
/* Position sparkles in corners - avoiding center */
/* Top-left corner cluster */
.sparkle:nth-child(1) { top: 3%; left: 3%; animation-delay: 0s; }
.sparkle:nth-child(2) { top: 6%; left: 12%; animation-delay: 0.4s; }
.sparkle:nth-child(3) { top: 10%; left: 5%; animation-delay: 0.85s; }
.sparkle:nth-child(4) { top: 14%; left: 15%; animation-delay: 0.2s; }
.sparkle:nth-child(5) { top: 8%; left: 22%; animation-delay: 1.1s; }
.sparkle:nth-child(6) { top: 18%; left: 3%; animation-delay: 0.55s; }
.sparkle:nth-child(7) { top: 22%; left: 10%; animation-delay: 0.95s; }
.sparkle:nth-child(8) { top: 28%; left: 5%; animation-delay: 0.3s; }
.sparkle:nth-child(9) { top: 3%; left: 28%; animation-delay: 0.7s; }
/* Top-right corner cluster */
.sparkle:nth-child(10) { top: 3%; right: 3%; animation-delay: 0.15s; }
.sparkle:nth-child(11) { top: 7%; right: 12%; animation-delay: 0.6s; }
.sparkle:nth-child(12) { top: 11%; right: 5%; animation-delay: 1.0s; }
.sparkle:nth-child(13) { top: 15%; right: 18%; animation-delay: 0.35s; }
.sparkle:nth-child(14) { top: 5%; right: 22%; animation-delay: 0.8s; }
.sparkle:nth-child(15) { top: 20%; right: 3%; animation-delay: 0.25s; }
.sparkle:nth-child(16) { top: 24%; right: 12%; animation-delay: 1.15s; }
.sparkle:nth-child(17) { top: 30%; right: 5%; animation-delay: 0.5s; }
.sparkle:nth-child(18) { top: 12%; right: 28%; animation-delay: 0.9s; }
/* Bottom-left corner cluster */
.sparkle:nth-child(19) { bottom: 3%; left: 3%; animation-delay: 0.45s; }
.sparkle:nth-child(20) { bottom: 8%; left: 12%; animation-delay: 0.1s; }
.sparkle:nth-child(21) { bottom: 12%; left: 5%; animation-delay: 0.75s; }
.sparkle:nth-child(22) { bottom: 16%; left: 18%; animation-delay: 1.2s; }
.sparkle:nth-child(23) { bottom: 6%; left: 24%; animation-delay: 0.4s; }
.sparkle:nth-child(24) { bottom: 20%; left: 3%; animation-delay: 0.65s; }
.sparkle:nth-child(25) { bottom: 24%; left: 10%; animation-delay: 0.05s; }
.sparkle:nth-child(26) { bottom: 28%; left: 5%; animation-delay: 1.05s; }
.sparkle:nth-child(27) { bottom: 14%; left: 28%; animation-delay: 0.3s; }
/* Bottom-right corner cluster */
.sparkle:nth-child(28) { bottom: 3%; right: 3%; animation-delay: 0.7s; }
.sparkle:nth-child(29) { bottom: 7%; right: 14%; animation-delay: 0.2s; }
.sparkle:nth-child(30) { bottom: 11%; right: 5%; animation-delay: 0.55s; }
.sparkle:nth-child(31) { bottom: 15%; right: 20%; animation-delay: 0.95s; }
.sparkle:nth-child(32) { bottom: 5%; right: 25%; animation-delay: 0.15s; }
.sparkle:nth-child(33) { bottom: 19%; right: 3%; animation-delay: 1.25s; }
.sparkle:nth-child(34) { bottom: 23%; right: 12%; animation-delay: 0.45s; }
.sparkle:nth-child(35) { bottom: 27%; right: 5%; animation-delay: 0.85s; }
.sparkle:nth-child(36) { bottom: 10%; right: 28%; animation-delay: 0.35s; }
/* Edge sparkles (top/bottom center, left/right middle) */
.sparkle:nth-child(37) { top: 4%; left: 42%; animation-delay: 0.6s; }
.sparkle:nth-child(38) { bottom: 4%; right: 42%; animation-delay: 0.8s; }
/* Four corner breathing animation - unchanged timing */
@keyframes corner-breathe {
  0%, 100% { opacity: 0.6; transform: scale(1); }
  50% { opacity: 1; transform: scale(1.08); }
}
/* Sparkle pulse animation */
@keyframes sparkle-pulse {
  0%, 100% { opacity: 0.4; transform: scale(0.85); }
  50% { opacity: 1; transform: scale(1.15); }
}
/* Twinkle animation - pop in, rotate, fade out */
@keyframes sparkle-twinkle {
  0%, 100% { opacity: 0; transform: scale(0.3) rotate(0deg); }
  15% { opacity: 1; transform: scale(1.2) rotate(15deg); }
  30% { opacity: 0.9; transform: scale(1) rotate(30deg); }
  50% { opacity: 0.7; transform: scale(0.9) rotate(45deg); }
  70% { opacity: 0.3; transform: scale(0.6) rotate(60deg); }
  85% { opacity: 0; transform: scale(0.4) rotate(75deg); }
}

/* Magic Stop Button - Centered circle with breathing glow */
.magic-stop-btn {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 20;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 64px;
  height: 64px;
  padding: 0;
  background: rgba(0, 0, 0, 0.5);
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
  border-radius: 50%;
  border: 2px solid rgba(255, 255, 255, 0.15);
  cursor: pointer;
  /* Soft glow using brand color - breathing effect */
  box-shadow: 0 0 0 0 rgba(237, 9, 66, 0.4), 0 0 30px rgba(237, 9, 66, 0.2), 0 0 60px rgba(237, 9, 66, 0.1);
  animation: stop-btn-pulse 2s ease-in-out infinite;
  transition: background 0.3s ease, border-color 0.3s ease;
}
.magic-stop-btn:hover { background: rgba(0, 0, 0, 0.7); border-color: rgba(255, 255, 255, 0.25); }
.magic-stop-btn:active { transform: translate(-50%, -50%) scale(0.95); }
/* Stop icon - clean square inside circle */
.magic-stop-icon { width: 18px; height: 18px; background: rgba(255, 255, 255, 0.95); border-radius: 3px; box-shadow: 0 0 10px rgba(255, 255, 255, 0.5); }
/* Pulsing breathing animation for stop button - brand color */
@keyframes stop-btn-pulse {
  0%, 100% {
    box-shadow: 0 0 0 0 rgba(237, 9, 66, 0.4), 0 0 20px rgba(237, 9, 66, 0.15), 0 0 40px rgba(237, 9, 66, 0.08);
    border-color: rgba(255, 255, 255, 0.15);
  }
  50% {
    box-shadow: 0 0 0 12px rgba(237, 9, 66, 0), 0 0 40px rgba(237, 9, 66, 0.3), 0 0 80px rgba(237, 9, 66, 0.15);
    border-color: rgba(237, 9, 66, 0.4);
  }
}
